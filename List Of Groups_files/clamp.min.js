!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.$clamp=t()}(this,function(){return function(e,t){t=t||{};var n,i=window,l={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},a=e.style,r=e.innerHTML,o=void 0!==e.style.webkitLineClamp,u=l.clamp,c=u.indexOf&&(u.indexOf("px")>-1||u.indexOf("em")>-1);function s(e,t){return i.getComputedStyle||(i.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),i.getComputedStyle(e,null).getPropertyValue(t)}function p(t){var n=t||e.clientHeight,i=d(e);return Math.max(Math.floor(n/i),0)}function d(e){var t=s(e,"line-height");return"normal"==t&&(t=1.187*parseInt(s(e,"font-size"))),Math.ceil(parseFloat(t))}l.truncationHTML&&((n=document.createElement("span")).innerHTML=l.truncationHTML);var h,f,C,m,v=l.splitOnChars.slice(0),g=v[0];function y(t){if(t.lastChild)return t.lastChild.childNodes&&t.lastChild.childNodes.length>0?y(Array.prototype.slice.call(t.childNodes).pop()):t.lastChild&&t.lastChild.nodeValue&&""!==t.lastChild.nodeValue&&t.lastChild.nodeValue!=l.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),y(e))}function H(e,t){e.nodeValue=t+l.truncationChar}if("auto"==u?u=p():c&&(u=p(parseInt(u))),o&&l.useNativeClamp)a.overflow="hidden",a.textOverflow="ellipsis",a.webkitBoxOrient="vertical",a.display="-webkit-box",a.webkitLineClamp=u,c&&(a.height=l.clamp+"px");else{var M=(m=u,d(e)*m);M<e.clientHeight&&(C=function t(i,a){if(i&&a){var r=i.nodeValue.replace(l.truncationChar,"");if(h||(g=v.length>0?v.shift():"",h=r.split(g)),h.length>1?(f=h.pop(),H(i,h.join(g))):h=null,n&&(i.nodeValue=i.nodeValue.replace(l.truncationChar,""),e.innerHTML=i.nodeValue+" "+n.innerHTML+l.truncationChar),h){if(e.clientHeight<=a){if(!(v.length>=0&&""!==g))return e.innerHTML;H(i,h.join(g)+g+f),h=null}}else""===g&&(H(i,""),i=y(e),v=l.splitOnChars.slice(0),g=v[0],h=null,f=null);if(!l.animate)return t(i,a);setTimeout(function(){t(i,a)},!0===l.animate?10:l.animate)}}(y(e),M))}return{original:r,clamped:C}}});